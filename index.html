<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Hoorain Cosmetics</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{margin:0;font-family:Arial;background:#ffe6f0}
header{background:#000;color:#ff69b4;padding:15px;text-align:center}
button{background:#ff69b4;border:none;padding:10px;margin:5px;font-weight:bold}
input,select{padding:8px;margin:5px;width:90%}
.card{background:#fff;margin:10px;padding:15px;border-radius:8px}
.hidden{display:none}
nav button{width:30%}
</style>
</head>

<body>

<header>
<h2>Hoorain Cosmetics</h2>
<p>ðŸ“ž 0303-4141011</p>
</header>

<!-- LOGIN -->
<div id="login" class="card">
<h3>Login</h3>
<input type="password" id="pin" placeholder="Enter PIN">
<button onclick="login()">Login</button>
<p id="msg" style="color:red"></p>
</div>

<!-- APP -->
<div id="app" class="hidden">

<nav>
<button onclick="show('dash')">Dashboard</button>
<button onclick="show('products')">Products</button>
<button onclick="show('sales')">Sales</button>
<button onclick="logout()">Logout</button>
</nav>

<div id="dash" class="card">
<p>Today Sale: Rs <span id="todaySale">0</span></p>
<p>Monthly Sale: Rs <span id="monthSale">0</span></p>
<p>Total Products: <span id="totalProducts">0</span></p>
<p>Low Stock: <span id="lowStock">0</span></p>
</div>

<div id="products" class="card hidden">
<h3>Add Product</h3>
<input id="pname" placeholder="Product Name">
<input id="pprice" type="number" placeholder="Price">
<input id="pstock" type="number" placeholder="Stock">
<button onclick="addProduct()">Add</button>
<div id="plist"></div>
</div>

<div id="sales" class="card hidden">
<h3>Add Sale</h3>
<select id="saleProduct"></select>
<input id="saleQty" type="number" placeholder="Quantity">
<button onclick="sell()">Sell</button>
</div>

</div>

<script>
const PIN="1234";
let products=JSON.parse(localStorage.getItem("products")||"[]");
let sales=JSON.parse(localStorage.getItem("sales")||"[]");

function login(){
 if(pin.value===PIN){
  localStorage.setItem("login","1");
  start();
 } else msg.innerText="Wrong PIN";
}

function logout(){
 localStorage.clear();
 location.reload();
}

if(localStorage.getItem("login")) start();

function start(){
 login.style.display="none";
 app.classList.remove("hidden");
 show("dash");
 render();
}

function show(id){
 ["dash","products","sales"].forEach(x=>document.getElementById(x).classList.add("hidden"));
 document.getElementById(id).classList.remove("hidden");
}

function addProduct(){
 products.push({
  name:pname.value,
  price:+pprice.value,
  stock:+pstock.value
 });
 save();
 pname.value=pprice.value=pstock.value="";
 render();
}

function sell(){
 let i=saleProduct.value;
 let q=+saleQty.value;
 if(products[i].stock>=q){
  products[i].stock-=q;
  sales.push({amount:products[i].price*q,date:new Date()});
  save();
  saleQty.value="";
  render();
 }
}

function render(){
 plist.innerHTML="";
 saleProduct.innerHTML="";
 let today=0,month=0,low=0;
 let now=new Date();

 products.forEach((p,i)=>{
  plist.innerHTML+=`<p>${p.name} | Rs ${p.price} | Stock ${p.stock}</p>`;
  saleProduct.innerHTML+=`<option value="${i}">${p.name}</option>`;
  if(p.stock<=5) low++;
 });

 sales.forEach(s=>{
  let d=new Date(s.date);
  if(d.toDateString()===now.toDateString()) today+=s.amount;
  if(d.getMonth()===now.getMonth()) month+=s.amount;
 });

 todaySale.innerText=today;
 monthSale.innerText=month;
 totalProducts.innerText=products.length;
 lowStock.innerText=low;
}

function save(){
 localStorage.setItem("products",JSON.stringify(products));
 localStorage.setItem("sales",JSON.stringify(sales));
}
</script>

</body>
</html>
